<!-- Feito por Bruno Bagattini Fernandes -->
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>D&D Encounter Forge</title>
  <link rel="icon" type="image/png" href="faviconDnd.png">
  <link href="https://fonts.googleapis.com/css2?family=MedievalSharp&display=swap" rel="stylesheet">

  <style>
    body {
      background: #e6e9db;
      background-size: cover;
      font-family: 'MedievalSharp', cursive;
      color: #2e1a0f;
      margin: 0;
      padding: 40px;
    }

    h2 {
      font-size: 36px;
      text-align: center;
      margin-bottom: 30px;
      text-shadow: 1px 1px 0 #e6d3b3;
    }

    label {
      font-size: 20px;
      margin-top: 20px;
      display: block;
    }

    select, input {
      width: 100%;
      max-width: 400px;
      padding: 10px;
      margin: 8px 0;
      border: 2px solid #5e3b1c;
      border-radius: 10px;
      background-color: #fdf5e6;
      font-size: 18px;
      box-shadow: 2px 2px 4px rgba(0,0,0,0.2);
    }

    button {
      margin-top: 30px;
      padding: 12px 24px;
      font-size: 20px;
      background-color: #8b0000;
      color: #fffbe6;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      font-weight: bold;
      transition: background-color 0.3s ease;
      box-shadow: 3px 3px 5px rgba(0,0,0,0.3);
    }

    button:hover {
      background-color: #a80000;
    }

    .resultado {
      margin-top: 30px;
      font-size: 18px;
      font-weight: bold;
      background-color: rgba(255, 255, 240, 0.85);
      padding: 15px;
      border: 2px dashed #5e3b1c;
      border-radius: 10px;
      max-width: 600px;
    }
  </style>
</head>
<body>

  <h2>D&D Encounter Forge</h2>

  <label for="Ideia">Ideia Espec√≠fica:</label>
  <select id="Ideia">
    <option value="0">Nenhuma</option>
    <option value="1">Aberra√ß√µes</option>
    <option value="2">Bestas Selvagens</option>
    <option value="3">Ca√ßada ou Fuga</option>
    <option value="4">Conflito Pol√≠tico</option>
    <option value="5">Constructos</option>
    <option value="6">Dem√¥nios</option>
    <option value="7">Drag√µes</option>
    <option value="8">Elementais</option>
    <option value="9">Explora√ß√£o de Ru√≠nas</option>
    <option value="10">Fadas</option>
    <option value="11">Gigantes</option>
    <option value="12">Humanoides</option>
    <option value="13">Intera√ß√£o Social</option>
    <option value="14">M√≠micos e Armadilhas</option>
    <option value="15">Mortos-Vivos</option>
  </select>

  <label for="Ambiente">Ambiente:</label>
  <select id="Ambiente">
    <option value="1">Abismo (Demon√≠aco)</option>
    <option value="2">Aldeia Abandonada</option>
    <option value="3">Arena de Gladiadores</option>
    <option value="4">√Årea Arcana Inst√°vel</option>
    <option value="5">Biblioteca Arcana</option>
    <option value="6">Bosque Encantado</option>
    <option value="7">C√¢nion Escarpado</option>
    <option value="8">Castelo em Ru√≠nas</option>
    <option value="9">Caverna de Cristal</option>
    <option value="10">Cavernas</option>
    <option value="11">Cavernas Submersas</option>
    <option value="12">Cemit√©rio</option>
    <option value="13">Cidade</option>
    <option value="14">Cidade Submersa</option>
    <option value="15">Colmeia de Inseto Gigante</option>
    <option value="16">Cripta</option>
    <option value="17">Deserto</option>
    <option value="18">Dom√≠nio dos Vampiros</option>
    <option value="19">Dungeon Subterr√¢nea</option>
    <option value="20">Fenda Dimensional</option>
    <option value="21">Floresta</option>
    <option value="22">Floresta de Cogumelos Gigantes</option>
    <option value="23">Floresta Sombria</option>
    <option value="24">Ilha Deserta</option>
    <option value="25">Ilha Misteriosa</option>
    <option value="26">Inferno (Baator)</option>
    <option value="27">Laborat√≥rio Alqu√≠mico</option>
    <option value="28">Mar Aberto</option>
    <option value="29">Mercado Interplanar</option>
    <option value="30">Montanha</option>
    <option value="31">Navio Fantasma</option>
    <option value="32">Ninho de Drag√£o</option>
    <option value="33">P√¢ntano</option>
    <option value="34">Pico Congelado</option>
    <option value="35">Plano das Fadas</option>
    <option value="36">Plano Elemental da √Ågua</option>
    <option value="37">Plano Elemental da Terra</option>
    <option value="38">Plano Elemental do Ar</option>
    <option value="39">Plano Elemental do Fogo</option>
    <option value="40">Plano Et√©reo</option>
    <option value="41">Plano Sombrio</option>
    <option value="42">Plan√≠cies</option>
    <option value="43">Porto Pirata</option>
    <option value="44">Ru√≠nas Antigas</option>
    <option value="45">Ru√≠nas Submersas</option>
    <option value="46">Sepulcro Antigo</option>
    <option value="47">Subterr√¢neo Profundo (Underdark)</option>
    <option value="48">Templo Abandonado</option>
    <option value="49">Templo em Ru√≠nas no Deserto</option>
    <option value="50">Templo Subaqu√°tico</option>
    <option value="51">Terras Mortas</option>
    <option value="52">Torre de Mago</option>
    <option value="53">Trilha dos Gigantes</option>
    <option value="54">T√∫neis Abissais</option>
    <option value="55">Tundra Congelada</option>
    <option value="56">Vila Rural</option>
    <option value="57">Vulc√£o Ativo</option>
    <option value="58">Zona Contaminada (Maldi√ß√£o ou Praga)</option>
    <option value="59">Zona de Guerra</option>
  </select>

  <label for="Dificuldade">Dificuldade:</label>
  <select id="Dificuldade">
    <option value="1">Muito F√°cil</option>
    <option value="2">F√°cil</option>
    <option value="4">M√©dio</option>
    <option value="6">Dif√≠cil</option>
    <option value="8">Mortal</option>
    <option value="10">Insano</option>
  </select>
  
  <label for="Roll20">Roll20:</label>
  <input type="number" id="Roll20" placeholder="Digite um n√∫mero de 1 a 20">

  <label for="LvlJogador">Level dos Jogadores:</label>
  <input type="number" id="LvlJogador" placeholder="Digite o level m√©dio">

  <button onclick="salvarDados()">Salvar</button>

  <div class="resultado" id="resultado"></div>

  <script src="main.js"></script>
  <script>
function salvarDados() {
  const ideia = document.getElementById("Ideia");
  const ambiente = document.getElementById("Ambiente");
  const dificuldadeBase = parseFloat(document.getElementById("Dificuldade").value);
  const roll20 = parseInt(document.getElementById("Roll20").value);
  const lvlJogador = parseInt(document.getElementById("LvlJogador").value);

  const ideiaText = ideia.options[ideia.selectedIndex].text;
  const ambienteText = ambiente.options[ambiente.selectedIndex].text;

  // üé≤ Interpreta√ß√£o do dado
  function getRollModifier(roll) {
  const modifiers = {
    1: 2.5,
    2: 1.8,
    3: 1.7,
    4: 1.6,
    5: 1.5,
    6: 1.3,
    7: 1.2,
    8: 1.1,
    9: 1.0,
    10: 1.0,
    11: 1.0,
    12: 1.0,
    13: 1.0,
    14: 0.95,
    15: 0.9,
    16: 0.8,
    17: 0.7,
    18: 0.6,
    19: 0.5,
    20: 0.25
  };

  return modifiers[roll] || 1.0;
}

function getRollLabel(roll) {
  if (roll === 1) return "üé≤ Falha Cr√≠tica";
  if (roll >= 2 && roll <= 6) return "‚ö†Ô∏è Falha parcial";
  if (roll >= 7 && roll <= 14) return "üòê Resultado Neutro";
  if (roll >= 15 && roll <= 19) return "‚úÖ Sucesso Parcial";
  if (roll === 20) return "üôè Sucesso Critico";
  return "‚õî Valor inv√°lido";
}

const rollModifier = getRollModifier(roll20);
const interpretacaoRoll = getRollLabel(roll20);

const dificuldadeFinal = Math.min(Math.round(dificuldadeBase * rollModifier * 100));

  // üí° Faixa textual da dificuldade
  let dificuldadeTexto;
  if (dificuldadeFinal <= 100) {
    dificuldadeTexto = "üò¥ Amea√ßa Nula";
  } else if (dificuldadeFinal <= 300) {
    dificuldadeTexto = "üü¢ Encontro de Baixo Risco";
  } else if (dificuldadeFinal <= 600) {
    dificuldadeTexto = "üü° Encontro Desafiador";
  } else if (dificuldadeFinal <= 850) {
    dificuldadeTexto = "üî¥ Encontro de Alto Risco";
  } else {
    dificuldadeTexto = "üíÄ Amea√ßa Extrema";
  }
      const variacaoPercentual = Math.random() * 1 - 0.5;
      const grupoReal = Math.round(lvlJogador + (lvlJogador * variacaoPercentual));
  
      const monstros = sugerirMonstros(parseFloat(dificuldadeFinal), ambienteText, lvlJogador, ideiaText);
  
      let resultadoTexto = `
Ideia: ${ideiaText}
Ambiente: ${ambienteText}
Dificuldade Base: ${dificuldadeBase}
Roll20: ${roll20} ‚Üí ${interpretacaoRoll}
üí• Dificuldade Final: ${dificuldadeFinal}/2500 ‚Üí ${dificuldadeTexto}
`;

  
      if (monstros.length > 0) {
        resultadoTexto += `\nüëπ Op√ß√µes de Monstro:\n`;
        monstros.forEach((m, i) => {
          const qtd = Math.floor(Math.random() * (m.max - m.min + 1)) + m.min;
          resultadoTexto += `${i + 1}. ${m.nome} (x${qtd})\n`;
        });
      }
      document.getElementById("resultado").innerText = resultadoTexto;
    }
  </script>
  
</body>
</html>